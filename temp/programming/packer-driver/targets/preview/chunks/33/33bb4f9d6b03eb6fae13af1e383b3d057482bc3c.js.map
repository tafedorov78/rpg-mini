{"version":3,"sources":["file:///Users/artemfedorov/Documents/dev/rpg-mini/assets/Scripts/poolFactory/PoolFactory.ts"],"names":["PoolFactory","NodePool","instantiate","constructor","prefab","size","name","_pool","pool","i","coin","put","get","node","decorate","value"],"mappings":";;;yFAEaA,W;;;;;;;;;AAFUC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,W,OAAAA,W;;;;;;;;;6BAEpBF,W,GAAN,MAAMA,WAAN,CAAkB;AAIrBG,QAAAA,WAAW,CAACC,MAAD,EAAiBC,IAAjB,EAA+BC,IAA/B,EAAsD;AAAA,cAAvBA,IAAuB;AAAvBA,YAAAA,IAAuB,GAAR,MAAQ;AAAA;;AAAA,eAHzDF,MAGyD;AAAA,eAFzDG,KAEyD;AAC7D,eAAKH,MAAL,GAAcA,MAAd;AACA,eAAKI,IAAL,GAAY,IAAIP,QAAJ,CAAaK,IAAb,CAAZ;;AAEA,eAAK,IAAIG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,IAApB,EAA0BI,CAAC,EAA3B,EAA+B;AAC3B,gBAAMC,IAAI,GAAGR,WAAW,CAAC,KAAKE,MAAN,CAAxB;AACA,iBAAKI,IAAL,CAAUG,GAAV,CAAcD,IAAd;AACH;AACJ;;AAEME,QAAAA,GAAG,GAAS;AACf,cAAIC,IAAI,GAAG,KAAKL,IAAL,CAAUI,GAAV,EAAX;;AACA,cAAI,CAACC,IAAL,EAAW;AACPA,YAAAA,IAAI,GAAG,KAAKC,QAAL,CAAcZ,WAAW,CAAC,KAAKE,MAAN,CAAzB,CAAP;AACH;;AACD,iBAAOS,IAAP;AACH;;AAEMC,QAAAA,QAAQ,CAACD,IAAD,EAAmB;AAC9B,iBAAOA,IAAP;AACH;;AAEMF,QAAAA,GAAG,CAACD,IAAD,EAAmB;AACzB,eAAKF,IAAL,CAAUG,GAAV,CAAcD,IAAd;AACH;;AAEO,YAAJF,IAAI,CAACO,KAAD,EAAkB;AACtB,eAAKR,KAAL,GAAaQ,KAAb;AACH;;AAEO,YAAJP,IAAI,GAAa;AACjB,iBAAO,KAAKD,KAAZ;AACH;;AApCoB,O","sourcesContent":["import { Node, Prefab, NodePool, instantiate } from 'cc';\n\nexport class PoolFactory {\n    private prefab: Prefab;\n    private _pool: NodePool;\n\n    constructor(prefab: Prefab, size: number, name: string = 'pool') {\n        this.prefab = prefab;\n        this.pool = new NodePool(name);\n\n        for (let i = 0; i < size; i++) {\n            const coin = instantiate(this.prefab);\n            this.pool.put(coin);\n        }\n    }\n\n    public get(): Node {\n        let node = this.pool.get();\n        if (!node) {\n            node = this.decorate(instantiate(this.prefab));\n        }\n        return node;\n    }\n\n    public decorate(node: Node): Node {\n        return node;\n    }\n\n    public put(coin: Node): void {\n        this.pool.put(coin);\n    }\n\n    set pool(value: NodePool) {\n        this._pool = value;\n    }\n\n    get pool(): NodePool {\n        return this._pool;\n    }\n}"]}